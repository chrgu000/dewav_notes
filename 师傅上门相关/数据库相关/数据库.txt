在CentOS中默认安装有MariaDB，这个是MySQL的分支，但为了需要，还是要在系统中安装MySQL，而且安装完成之后可以直接覆盖掉MariaDB。

1 下载并安装MySQL官方的 Yum Repository

[root@localhost ~]# wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm
  使用上面的命令就直接下载了安装用的Yum Repository，大概25KB的样子，然后就可以直接yum安装了。

[root@localhost ~]# yum -y install mysql57-community-release-el7-10.noarch.rpm
  之后就开始安装MySQL服务器。

[root@localhost ~]# yum -y install mysql-community-server
  这步可能会花些时间，安装完成后就会覆盖掉之前的mariadb。

至此MySQL就安装完成了，然后是对MySQL的一些设置。

2 MySQL数据库设置

  首先启动MySQL
 
[root@localhost ~]# systemctl start  mysqld.service   
  查看MySQL运行状态，运行状态如图：

[root@localhost ~]# systemctl status mysqld.service

[root@localhost ~]# service mysqld start 开启数据库

[root@localhost ~]# service mysqld status 数据库状态

此时MySQL已经开始正常运行，不过要想进入MySQL还得先找出此时root用户的密码，通过如下命令可以在日志文件中找出密码：
[root@localhost ~]# grep "password" /var/log/mysqld.log

如下命令进入数据库：
[root@localhost ~]# mysql -uroot -p
输入初始密码，此时不能做任何事情，因为MySQL默认必须修改密码之后才能操作数据库：

mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'new password';
这里有个问题，新密码设置的时候如果设置的过于简单会报错：

原因是因为MySQL有密码设置的规范，具体是与validate_password_policy的值有关：

MySQL完整的初始密码规则可以通过如下命令查看：
复制代码
mysql> SHOW VARIABLES LIKE 'validate_password%';
+--------------------------------------+-------+
| Variable_name                        | Value |
+--------------------------------------+-------+
| validate_password_check_user_name    | OFF   |
| validate_password_dictionary_file    |       |
| validate_password_length             | 4     |
| validate_password_mixed_case_count   | 1     |
| validate_password_number_count       | 1     |
| validate_password_policy             | LOW   |
| validate_password_special_char_count | 1     |
+--------------------------------------+-------+
7 rows in set (0.01 sec)
复制代码
密码的长度是由validate_password_length决定的，而validate_password_length的计算公式是：

validate_password_length = validate_password_number_count + validate_password_special_char_count + (2 * validate_password_mixed_case_count)
 
我的是已经修改过的，初始情况下第一个的值是ON，validate_password_length是8。可以通过如下命令修改：

mysql> set global validate_password_policy=0;
mysql> set global validate_password_length=1;
设置之后就是我上面查出来的那几个值了，此时密码就可以设置的很简单，例如1234之类的。到此数据库的密码设置就完成了。

但此时还有一个问题，就是因为安装了Yum Repository，以后每次yum操作都会自动更新，需要把这个卸载掉：

[root@localhost ~]# yum -y remove mysql57-community-release-el7-10.noarch
此时才算真的完成了。

>mysql -u root -p登陆数据库
查看数据库: 
mysql>show databases;

查看用户
mysql>SELECT User, Host FROM mysql.user;

创建用户：
mysql> insert into mysql.user(Host,User,Password) values("localhost","test",password("1234"))
nmap localhost

mysql>CREATE USER 'pig'@'%' IDENTIFIED BY '123456';

删除用户u87
mysql>Delete FROM user Where User='test' and Host='localhost';
mysql>DROP USER 'test'@'%';

关闭数据库
./mysqladmin -u root -p shutdown

查看数据库版本

mysqladmin --version

centos7 mysql8
service start mysql.service
service stop mysql.service
#禁止mysql服务开机启动
systemctl disable mysql.service
#查看mysql服务状态
systemctl status mysql.service
#重新设置mysql服务开机启动
systemctl enable mysql.service

select CONCAT('TRUNCATE TABLE ',table_name,';') from information_schema.tables where TABLE_SCHEMA = 'db1'

cat truncate.xml | awk -F ">"  '{print $3  $4}' | awk -F "<"  '{print $1}' | sed "1d"

3396Zmr3Wj0VoflC